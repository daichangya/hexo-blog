---
title: 提升可伸缩性的8项最佳实践
id: 1115
date: 2024-10-31 22:01:49
author: daichangya
excerpt: Wille Faler 提出了八项提升系统可伸缩性和性能的最佳实践，其中包括减少数据库操作、使用缓存、减少网络通信等实践。1. 减少数据库操作 －
  尽可能远离数据库。如无必要，就不要打开数据库连接或者启动事务。2. 缓存带来的显著变化 － 缓存能极大地减低数据库的负担，特别是当系统通过只读方式访问数据库的时候。内存缓存优于磁盘缓存，而磁盘缓存又优于远程缓存和关系型数据库。
permalink: /archives/ti-sheng-ke-shen-suo-xing-de-8-xiang/
categories:
- 系统架构
---

Wille Faler 提出了[八项提升系统可伸缩性和性能的最佳实践](http://faler.wordpress.com/2009/05/08/best-practices-for-scalable-high-performance-systems/)，其中包括减少数据库操作、使用缓存、减少网络通信等实践。

**1\. 减少数据库操作** － 尽可能远离数据库。如无必要，就不要打开数据库连接或者启动事务。

**2\. 缓存带来的显著变化 －** 缓存能极大地减低数据库的负担，特别是当系统通过只读方式访问数据库的时候。内存缓存优于磁盘缓存，而磁盘缓存又优于远程缓存和关系型数据库。

**3\. 尽可能缓存粗粒度对象** － 缓存粗粒度对象“可以省去遍历n个缓存单元的CPU开销和时间。而且，获得完整的对象关系图也省去了对象关系图的装配时间。”

**4\. 不要永久性保存瞬态信息** － 避免在数据库里面存储瞬态数据，比如登录的会话信息。

> “状态怪物”是一只非常危险的怪兽。根据一般的规律，在持久性存储设施（数据库、磁盘等）里面只需要保存真实的、必要的、关键的，以及需要备录的业务数据，其他的都不在此列。

**5\. 位置、位置** － 把东西放在靠近需要使用它们的地方。相对于负载均衡器、Web服务器、应用服务器和数据库多个环节，直接经过负载均衡器和Web服务器从[CDN](http://en.wikipedia.org/wiki/Content_Delivery_Network)获取数据要快一些，开销也更小。

**6\. 约束对有限资源的并发访问** － 如果多个请求需要访问同样的资源，执行同样的计算，最好是只处理首个请求，让其他的请求等待计算完成后直接使用最终结果。让所有的线程去访问同一个资源只会减缓处理的速度。

**7\. 分阶段地、异步地处理**

> 根据处理过程的异步性，把该过程分散成单独的步骤，通过队列来隔离；每个步骤使用有限数量的工人线程进行处理：这样经常会给可伸缩性和性能同时带来奇迹般的变化。

**8\. 使网络延迟最小** － 尽可能使应用系统不去做远程访问，因为网络通信要明显慢于内存访问。在Faler这篇文章的评论里面，[Steve M. Ciske](http://www.steveciske.com/page/resume.aspx) 对减少数据库操作的做法表示了忧虑：

> 对于减少数据库操作的做法，我持谨慎态度。我见多了人们走向另一个极端，把所有的东西都放在应用层。

[Paweł Stradomski](http://squarewheel.pl/) 认为远程内存缓存要快于本地磁盘缓存，Faler 也表示了同意：

>  远程主机（通过网络连接）缓存可能会快于本地磁盘缓存。如果不考虑网络查找的时间，从磁盘顺序读取数据比从远程主机的内存里面读取数据要慢三倍。

延伸阅读：Simon Brown的文章“[可伸缩性原则](http://www.kuqin.com/design-patterns/20080727/12532.html)”。

**查看英文原文**： [8 Best Practices to Improve Scalability](http://www.infoq.com/news/2009/05/8-Best-Practices-Scalability "8 Best Practices to Improve Scalability")  